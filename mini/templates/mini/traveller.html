<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Visuals: Mini Project</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <style>
  #container {
    /* margin-top: 50px ;
    /* margin: 0px auto;*/
      width: 500px;
      height: 375px;
    /* border: 10px #333 solid; */
      background-image: url(snapshots/download.jpg);
      
  }
  #videoElement {
      width: 500px;
      height: 375px;
    
  }
  .no-padding
  {
    padding-left: 0;
    padding-right: 0;

  }

  #f_style
  {
      width: 100%;
      height: 70%;  
      margin-right: 10px; 
    
  }
  </style>
</head>
<body>

  
  <header class="site-header">
    <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top" style="background-color: #9ED270; padding-bottom: 10px; box-shadow: 10px 10px 8px grey;">
      <div class="container" style="height: 50px;">
        <a class="navbar-brand mr-4" href="/">MiniProject</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarToggle">
          <!-- <div class="navbar-nav mr-auto">
            <a class="nav-item nav-link" href="{% url 'mini-home' %}">Home</a>
            <a class="nav-item nav-link" href="/about">About</a>
          </div> -->
          <!-- Navbar Right Side -->
          <div class="navbar-nav">
            <a class="nav-item nav-link" href="{% url 'mini-home' %} ">Home</a>
            <a class="nav-item nav-link" href="{% url 'mini-about' %}">About</a>
            <a class="nav-item nav-link" href="{% url 'mini-help' %}">Help</a>
            <a class="nav-item nav-link" href="#"> ? </a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <canvas id="CANVAS" name="CANVAS" width="400" height="350">Your browser does not support Canvas.</canvas>
    
      
      <!-- <div id="container"  name='cont' class="container-fluid no-padding ">
        <video autoplay="true" id="videoElement" name='vid'>
      
        </video>
      </div> -->
  <div id="container"  name='cont' class="container-fluid no-padding " style="margin-top: 140px;">
    <h3 style="text-align: center; color: #9ED270;">You can capture the image</h3>
    <video autoplay="true" id="videoElement" name='vid'>
    </video>
  </div>
  <div id="container" style="margin-top: 100px; margin-left: 650px;">
    <a id="download" download="traveller.png"></form>
    <button onclick="myFunction(); download();" align="center" style="margin: 20px px auto " class="btn btn-primary" type="button" >Capture</button></a>
    <a href="{% url 'mini-travel' %}"><button class="btn btn-primary" style="margin-left: 40px;">Convert</button></a>
  </div>
  

  <script>

    function download(){
      var download = document.getElementById("download");
      var image = document.getElementById("CANVAS").toDataURL("image/png")
                        .replace("image/jpg", "image/octet-stream");
            download.setAttribute("href", image);
            //download.setAttribute("download","archive.png");
      }
      var video = document.querySelector("#videoElement");
    
    if (navigator.mediaDevices.getUserMedia) 
    {       
        navigator.mediaDevices.getUserMedia({video: true})
      .then(function(stream) {
        video.srcObject = stream;
      })
      .catch(function(err0r) {
        console.log("Something went wrong!");
      });
    var i=0;
    function myFunction() {
      var x =  document.getElementById("CANVAS") ;
      var ctx = x.getContext("2d");
      ctx.fillStyle = "#FF0000";
      
      ctx.drawImage(video, 0, 0, 400, 350);

      //ctx.fillRect(20, 20, 150, 100);

      if (i <10)
      {
      document.body.appendChild(x);
      i=i+1;
    };
    }

    }
  </script>

      
</body>
</html> 

